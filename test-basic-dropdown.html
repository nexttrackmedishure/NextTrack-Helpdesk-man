<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Basic Dropdown Test</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body style="background-color: #f3f4f6; padding: 32px; font-family: system-ui;">
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        // Basic dropdown with inline styles
        const BasicDropdown = ({ message, onReply, onForward, onCopy, onReport, onDelete }) => {
            const [showMenu, setShowMenu] = useState(false);

            const toggleMenu = () => {
                console.log('Button clicked! Show menu:', !showMenu);
                setShowMenu(!showMenu);
            };

            const handleAction = (action) => {
                action();
                setShowMenu(false);
            };

            return (
                <div style={{ position: 'relative', display: 'inline-block' }}>
                    {/* 3-Dot Button */}
                    <button
                        onClick={toggleMenu}
                        style={{
                            padding: '8px',
                            border: '1px solid #d1d5db',
                            borderRadius: '8px',
                            backgroundColor: 'white',
                            cursor: 'pointer',
                            display: 'flex',
                            alignItems: 'center',
                            justifyContent: 'center'
                        }}
                        type="button"
                    >
                        <svg width="16" height="16" viewBox="0 0 4 15" fill="currentColor">
                            <path d="M3.5 1.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Zm0 6.041a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Zm0 5.959a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z"/>
                        </svg>
                    </button>

                    {/* Dropdown Menu */}
                    {showMenu && (
                        <div
                            style={{
                                position: 'absolute',
                                top: '100%',
                                right: '0',
                                marginTop: '4px',
                                backgroundColor: 'white',
                                border: '1px solid #d1d5db',
                                borderRadius: '8px',
                                boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1)',
                                minWidth: '160px',
                                zIndex: 1000
                            }}
                        >
                            <div style={{ padding: '8px 0' }}>
                                <button
                                    onClick={() => handleAction(() => onReply?.(message))}
                                    style={{
                                        width: '100%',
                                        padding: '8px 16px',
                                        textAlign: 'left',
                                        border: 'none',
                                        backgroundColor: 'transparent',
                                        cursor: 'pointer',
                                        fontSize: '14px',
                                        color: '#374151'
                                    }}
                                    onMouseEnter={(e) => e.currentTarget.style.backgroundColor = '#f3f4f6'}
                                    onMouseLeave={(e) => e.currentTarget.style.backgroundColor = 'transparent'}
                                >
                                    Reply
                                </button>
                                <button
                                    onClick={() => handleAction(() => onForward?.(message))}
                                    style={{
                                        width: '100%',
                                        padding: '8px 16px',
                                        textAlign: 'left',
                                        border: 'none',
                                        backgroundColor: 'transparent',
                                        cursor: 'pointer',
                                        fontSize: '14px',
                                        color: '#374151'
                                    }}
                                    onMouseEnter={(e) => e.currentTarget.style.backgroundColor = '#f3f4f6'}
                                    onMouseLeave={(e) => e.currentTarget.style.backgroundColor = 'transparent'}
                                >
                                    Forward
                                </button>
                                <button
                                    onClick={() => handleAction(() => onCopy?.(message))}
                                    style={{
                                        width: '100%',
                                        padding: '8px 16px',
                                        textAlign: 'left',
                                        border: 'none',
                                        backgroundColor: 'transparent',
                                        cursor: 'pointer',
                                        fontSize: '14px',
                                        color: '#374151'
                                    }}
                                    onMouseEnter={(e) => e.currentTarget.style.backgroundColor = '#f3f4f6'}
                                    onMouseLeave={(e) => e.currentTarget.style.backgroundColor = 'transparent'}
                                >
                                    Copy
                                </button>
                                <button
                                    onClick={() => handleAction(() => onReport?.(message))}
                                    style={{
                                        width: '100%',
                                        padding: '8px 16px',
                                        textAlign: 'left',
                                        border: 'none',
                                        backgroundColor: 'transparent',
                                        cursor: 'pointer',
                                        fontSize: '14px',
                                        color: '#374151'
                                    }}
                                    onMouseEnter={(e) => e.currentTarget.style.backgroundColor = '#f3f4f6'}
                                    onMouseLeave={(e) => e.currentTarget.style.backgroundColor = 'transparent'}
                                >
                                    Report
                                </button>
                                <button
                                    onClick={() => handleAction(() => onDelete?.(message))}
                                    style={{
                                        width: '100%',
                                        padding: '8px 16px',
                                        textAlign: 'left',
                                        border: 'none',
                                        backgroundColor: 'transparent',
                                        cursor: 'pointer',
                                        fontSize: '14px',
                                        color: '#dc2626'
                                    }}
                                    onMouseEnter={(e) => e.currentTarget.style.backgroundColor = '#fef2f2'}
                                    onMouseLeave={(e) => e.currentTarget.style.backgroundColor = 'transparent'}
                                >
                                    Delete
                                </button>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // Test App
        const TestApp = () => {
            const [messages, setMessages] = useState([
                {
                    id: 1,
                    text: "This is a test message with basic dropdown",
                    sender: "agent",
                    timestamp: "11:46",
                    isRead: true,
                    type: "text",
                    senderName: "Test User"
                }
            ]);

            const handleReply = (message) => {
                alert(`Replying to: ${message.text}`);
            };

            const handleForward = (message) => {
                alert(`Forwarding: ${message.text}`);
            };

            const handleCopy = (message) => {
                navigator.clipboard.writeText(message.text);
                alert('Message copied to clipboard!');
            };

            const handleReport = (message) => {
                const reason = prompt('Report reason:');
                if (reason) {
                    alert(`Message reported: ${reason}`);
                }
            };

            const handleDelete = (message) => {
                if (confirm('Delete this message?')) {
                    setMessages(messages.filter(m => m.id !== message.id));
                    alert('Message deleted!');
                }
            };

            return (
                <div style={{ maxWidth: '800px', margin: '0 auto' }}>
                    <h1 style={{ fontSize: '24px', fontWeight: 'bold', textAlign: 'center', marginBottom: '32px' }}>
                        Basic Dropdown Test
                    </h1>
                    
                    <div style={{ backgroundColor: 'white', borderRadius: '8px', boxShadow: '0 1px 3px rgba(0,0,0,0.1)', padding: '24px' }}>
                        <h2 style={{ fontSize: '20px', fontWeight: '600', marginBottom: '16px' }}>
                            Test Message with Basic Dropdown
                        </h2>
                        
                        <div style={{ display: 'flex', flexDirection: 'column', gap: '16px' }}>
                            {messages.map((message) => (
                                <div key={message.id} style={{ display: 'flex', alignItems: 'flex-start', gap: '12px', padding: '16px', border: '1px solid #e5e7eb', borderRadius: '8px' }}>
                                    <div style={{ flex: 1 }}>
                                        <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '8px' }}>
                                            <span style={{ fontWeight: '600' }}>{message.senderName}</span>
                                            <span style={{ fontSize: '14px', color: '#6b7280' }}>{message.timestamp}</span>
                                        </div>
                                        <p style={{ color: '#374151', marginBottom: '8px' }}>{message.text}</p>
                                        <span style={{ fontSize: '14px', color: '#6b7280' }}>Delivered</span>
                                    </div>
                                    
                                    <BasicDropdown
                                        message={message}
                                        onReply={handleReply}
                                        onForward={handleForward}
                                        onCopy={handleCopy}
                                        onReport={handleReport}
                                        onDelete={handleDelete}
                                    />
                                </div>
                            ))}
                        </div>
                        
                        {messages.length === 0 && (
                            <div style={{ textAlign: 'center', color: '#6b7280', padding: '32px' }}>
                                No messages left. Refresh to test again.
                            </div>
                        )}
                    </div>

                    <div style={{ marginTop: '32px', backgroundColor: '#f0fdf4', borderRadius: '8px', padding: '24px' }}>
                        <h3 style={{ fontSize: '18px', fontWeight: '600', color: '#166534', marginBottom: '8px' }}>
                            ✅ Basic Dropdown Features:
                        </h3>
                        <ul style={{ color: '#166534', lineHeight: '1.6' }}>
                            <li>• Uses inline styles (no CSS conflicts)</li>
                            <li>• Simple React state management</li>
                            <li>• Console logging for debugging</li>
                            <li>• All 5 actions working</li>
                            <li>• Hover effects with inline handlers</li>
                            <li>• High z-index to appear above everything</li>
                        </ul>
                    </div>
                </div>
            );
        };

        // Render the app
        ReactDOM.render(<TestApp />, document.getElementById('root'));
    </script>
</body>
</html>
